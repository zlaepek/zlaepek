# GitHub 프로필 자동 업데이트 시스템 설명

## 개요
GitHub Actions를 활용해 매일 자동으로 프로필을 업데이트하는 시스템입니다. 
실시간 통계, 언어 트렌드 차트, 최근 활동 등을 자동으로 분석하고 README에 반영합니다.

## 전체 구조

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│  GitHub Actions │───▶│  데이터 수집     │───▶│  README 업데이트 │
│  (스케줄러)      │    │  & 분석        │    │  & 커밋         │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 2개의 워크플로우

### 1. generate-charts.yml (언어 트렌드 차트 생성)
**실행 시점:** 매주 월요일 오전 9시
**주요 기능:**
- GitHub API로 리포지토리 언어 통계 수집
- 12개월간 언어 사용 트렌드 분석
- 언어별 성장률 계산
- PNG 차트 이미지 생성 및 assets 폴더 저장

```python
# Python 스크립트가 실행됨
1. GitHub API 호출 → 모든 리포지토리 정보 가져오기
2. 각 리포의 언어별 바이트 수 분석
3. 월별 데이터로 정리 (지난 12개월)
4. matplotlib로 2개 차트 생성:
   - language_trend_chart.png (트렌드 라인)
   - language_growth_chart.png (성장률 바)
5. README의 <!-- TREND_CHART --> 섹션 업데이트
```

### 2. update-profile.yml (프로필 통계 업데이트) 
**실행 시점:** 매일 오전 9시 (한국시간)
**주요 기능:**
- 현재 스킬 레벨 계산 및 업데이트
- 주간 활동 리포트 생성  
- 최근 커밋 활동 수집

```javascript
// Node.js 스크립트가 실행됨
1. GitHub API로 사용자 리포지토리 목록 가져오기
2. 각 리포의 언어별 바이트 수 → 스킬 레벨 계산
   레벨 = min(99, floor(log2(바이트수/1000 + 커밋수*10 + 1) * 8))
3. 최근 30개 이벤트에서 커밋 활동 추출
4. README의 3개 섹션 업데이트:
   - <!-- SKILL_START --> 스킬 뱃지
   - <!-- WEEKLY_START --> 주간 리포트  
   - <!-- ACTIVITY_START --> 최근 활동
5. 업데이트 시간 갱신
```

## 데이터 수집 방식

### GitHub API 호출 구조:
```
GET /users/{username}/repos          → 리포지토리 목록
GET /repos/{owner}/{repo}/languages  → 언어별 바이트 수
GET /users/{username}/events         → 최근 활동 (커밋, 이슈 등)
```

### 스킬 레벨 계산 로직:
```
활동점수 = (언어 바이트수 ÷ 1000) + (커밋수 × 10)
레벨 = min(99, floor(log2(활동점수 + 1) × 8))

예시:
- JavaScript 500KB + 20커밋 = 500 + 200 = 700점 → 레벨 76
- Python 100KB + 5커밋 = 100 + 50 = 150점 → 레벨 58
```

## README 업데이트 방식

특별한 주석을 이용해 특정 섹션만 교체:

```markdown
<!-- SKILL_START -->
현재 내용이 여기에 자동으로 교체됨
<!-- SKILL_END -->

<!-- WEEKLY_START -->  
주간 리포트가 여기에 자동으로 업데이트됨
<!-- WEEKLY_END -->
```

정규표현식으로 해당 구간을 찾아서 새로운 내용으로 교체합니다.

## 커밋 및 푸시 과정

1. 변경사항 스테이징: `git add README.md assets/`
2. 변경사항 체크: `git diff --staged --quiet`  
3. 변경사항 있으면 커밋: `git commit -m "메시지"`
4. 원격 저장소 푸시: `git push`

## 권한 설정

```yaml
permissions:
  contents: write  # README 파일 수정 및 커밋 권한
```

GitHub Actions가 자동으로 GITHUB_TOKEN을 생성해서 인증에 사용합니다.

## 실패 처리

- API 호출 실패시: 샘플 데이터로 차트 생성
- 데이터 없을시: 기본값 사용
- 에러 발생시: 로그 출력 후 스킵

## 장점

1. **완전 자동화**: 손수 업데이트할 필요 없음
2. **실시간 반영**: 개발 활동이 바로 프로필에 표시
3. **비용 무료**: GitHub Actions 무료 사용량 내에서 실행
4. **시각적**: 차트와 뱃지로 한눈에 파악 가능
5. **확장성**: 새로운 통계나 기능 쉽게 추가 가능

이 시스템을 통해 개발자의 실제 활동이 자동으로 프로필에 반영되어, 
방문자가 현재 어떤 기술에 집중하고 있는지 쉽게 파악할 수 있습니다.